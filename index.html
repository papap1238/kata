<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strip Photo Booth - Custom Frame</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            /* Mengubah background menjadi putih keabu-abuan */
            background: #f4f7f6;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .photobooth-container {
            /* Mengubah background container */
            background: #ffffff;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid #e0e0e0;
            padding: 30px;
            max-width: 1200px;
            width: 100%;
            text-align: center;
        }

        .header h1 {
            color: #333; /* Warna teks lebih gelap agar kontras */
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            color: #666; /* Warna teks deskripsi */
            font-size: 1.1em;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 30px;
            align-items: start;
        }

        .camera-section {
            position: relative;
            margin-bottom: 20px;
        }

        #video {
            width: 100%;
            max-width: 500px;
            height: 350px;
            object-fit: cover;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        #canvas {
            display: none;
        }

        .filter-overlay {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 500px;
            height: 350px;
            border-radius: 15px;
            pointer-events: none;
            transition: all 0.3s ease;
        }

        .strip-preview {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            min-height: 600px;
            position: relative;
            overflow: hidden;
            border: 1px solid #e0e0e0;
        }

        .strip-preview h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.3em;
        }

        .strip-container {
            width: 250px;
            height: 500px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            position: relative;
            overflow: hidden;
        }

        .custom-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.1;
            z-index: 1;
        }

        .strip-photos {
            position: relative;
            z-index: 2;
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: 20px;
            gap: 15px;
        }

        .strip-photo-slot {
            flex: 1;
            background: #ecf0f1;
            border: 2px dashed #bdc3c7;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #7f8c8d;
            font-size: 0.9em;
            position: relative;
            overflow: hidden;
        }

        .strip-photo-slot img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 6px;
        }

        .strip-photo-slot.filled {
            border: 2px solid #27ae60;
            background: transparent;
        }
        
        /* ... sisa CSS tidak diubah dan tetap sama seperti sebelumnya ... */
        .controls{display:flex;flex-direction:column;gap:20px}.control-group{background:rgba(52,73,94,.05);padding:15px;border-radius:12px;border:1px solid #e0e0e0}.control-group h4{color:#2c3e50;margin-bottom:10px;font-size:1em}.filter-buttons{display:flex;flex-wrap:wrap;gap:5px;justify-content:center}.filter-btn{padding:6px 12px;border:1px solid #ccc;border-radius:15px;background:#fff;color:#333;cursor:pointer;font-size:.8em;transition:all .3s ease;font-weight:500}.filter-btn:hover{transform:translateY(-2px);background:#e0e0e0}.filter-btn.active{background:#3498db;color:#fff;border-color:#3498db}.file-upload{position:relative;display:inline-block;width:100%}.file-upload input[type=file]{display:none}.file-upload-btn{display:block;width:100%;padding:10px;background:#9b59b6;color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:.9em;transition:all .3s ease}.file-upload-btn:hover{transform:translateY(-2px);background:#8e44ad}.start-btn,.capture-btn,.reset-btn,.download-strip-btn{color:#fff;border:none;padding:12px 25px;font-size:1em;border-radius:25px;cursor:pointer;transition:all .3s ease;font-weight:600;margin:5px;box-shadow:0 5px 15px rgba(0,0,0,.1)}.start-btn{background:#00b894}.capture-btn{background:#ff6b6b}.reset-btn{background:#fdcb6e}.download-strip-btn{background:#6c5ce7}.start-btn:hover,.capture-btn:hover,.reset-btn:hover,.download-strip-btn:hover{transform:translateY(-3px)}.capture-btn:disabled{background:#95a5a6;cursor:not-allowed;transform:none;box-shadow:none}.countdown{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:4em;color:#ff6b6b;font-weight:700;text-shadow:2px 2px 4px rgba(0,0,0,.3);z-index:10;opacity:0;transition:opacity .2s ease}.countdown.show{opacity:1}.photo-counter{background:#74b9ff;color:#fff;padding:8px 15px;border-radius:20px;font-weight:700;margin:10px 0;display:inline-block}.strip-title{position:absolute;top:5px;left:50%;transform:translateX(-50%);background:rgba(44,62,80,.8);color:#fff;padding:5px 15px;border-radius:10px;font-size:.8em;z-index:3}.strip-date{position:absolute;bottom:5px;left:50%;transform:translateX(-50%);background:rgba(44,62,80,.8);color:#fff;padding:3px 10px;border-radius:5px;font-size:.7em;z-index:3}.gallery{grid-column:1 / -1;margin-top:30px}.gallery h3{color:#2c3e50;margin-bottom:20px;font-size:1.5em}.strip-gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:20px}.strip-item{background:#fff;border-radius:10px;padding:15px;box-shadow:0 5px 15px rgba(0,0,0,.1);transition:transform .3s ease}.strip-item:hover{transform:scale(1.02)}.strip-item img{width:100%;border-radius:5px}.strip-actions{margin-top:10px;display:flex;gap:10px}.download-btn{flex:1;background:#27ae60;color:#fff;border:none;padding:8px;border-radius:5px;cursor:pointer;font-size:.9em;transition:background .3s ease}.download-btn:hover{background:#219a52}@media (max-width:768px){.photobooth-container{padding:15px}.main-content{grid-template-columns:1fr;gap:20px}.header h1{font-size:1.8em}#video{height:250px}.filter-overlay{height:250px}.strip-container{width:200px;height:400px}}

    </style>
</head>
<body>
    <div class="photobooth-container">
        <div class="header">
            <h1>üì∏ Strip Photo Booth</h1>
            <p>Buat strip foto dengan 3 pose berbeda dan frame kustom Anda!</p>
        </div>

        <div class="main-content">
            <div class="camera-side">
                <div class="camera-section">
                    <button id="startBtn" class="start-btn">üé• Mulai Kamera</button>
                    <video id="video" autoplay muted playsinline style="display: none;"></video>
                    <div id="filterOverlay" class="filter-overlay"></div>
                    <div id="countdown" class="countdown"></div>
                    <canvas id="canvas"></canvas>
                </div>

                <div class="photo-counter">
                    <span id="photoCount">Foto: 0/3</span>
                </div>

                <div class="controls">
                    <div class="control-group">
                        <h4>üé® Filter Warna</h4>
                        <div class="filter-buttons">
                            <button class="filter-btn active" data-filter="normal">Normal</button>
                            <button class="filter-btn" data-filter="sepia">Sepia</button>
                            <button class="filter-btn" data-filter="bw">B&W</button>
                            <button class="filter-btn" data-filter="vintage">Vintage</button>
                            <button class="filter-btn" data-filter="warm">Warm</button>
                            <button class="filter-btn" data-filter="cool">Cool</button>
                            <button class="filter-btn" data-filter="saturate">Vivid</button>
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>üñºÔ∏è Upload Frame Kustom</h4>
                        <div class="file-upload">
                            <input type="file" id="frameUpload" accept="image/*">
                            <label for="frameUpload" class="file-upload-btn">üìÅ Pilih Foto Frame</label>
                        </div>
                    </div>
                </div>

                <div class="capture-section">
                    <button id="captureBtn" class="capture-btn" disabled>üì∑ Ambil Foto (<span id="photoNumber">1</span>/3)</button>
                    <button id="resetBtn" class="reset-btn">üîÑ Reset Strip</button>
                </div>
            </div>

            <div class="strip-preview">
                <h3>üìã Preview Strip Photo</h3>
                <div class="strip-container" id="stripContainer">
                    <img id="customBackground" class="custom-background" style="display: none;">
                    <div class="strip-title">PHOTO STRIP</div>
                    <div class="strip-photos">
                        <div class="strip-photo-slot" data-slot="0">
                            <span>Foto 1</span>
                        </div>
                        <div class="strip-photo-slot" data-slot="1">
                            <span>Foto 2</span>
                        </div>
                        <div class="strip-photo-slot" data-slot="2">
                            <span>Foto 3</span>
                        </div>
                    </div>
                    <div class="strip-date" id="stripDate"></div>
                </div>
                <button id="downloadStripBtn" class="download-strip-btn" disabled>üíæ Download Strip</button>
            </div>
        </div>

        <div class="gallery">
            <h3>üé≠ Galeri Strip Photo</h3>
            <div id="stripGallery" class="strip-gallery"></div>
        </div>
    </div>

    <script>
        // ... Kode JavaScript tidak diubah dan tetap sama seperti sebelumnya ...
        let video=document.getElementById("video"),canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),startBtn=document.getElementById("startBtn"),captureBtn=document.getElementById("captureBtn"),resetBtn=document.getElementById("resetBtn"),downloadStripBtn=document.getElementById("downloadStripBtn"),filterOverlay=document.getElementById("filterOverlay"),countdown=document.getElementById("countdown"),stripGallery=document.getElementById("stripGallery"),frameUpload=document.getElementById("frameUpload"),customBackground=document.getElementById("customBackground"),photoCount=document.getElementById("photoCount"),photoNumber=document.getElementById("photoNumber"),stripDate=document.getElementById("stripDate"),currentFilter="normal",capturedPhotos=[],stripCount=0,stream=null,customFrame=null;stripDate.textContent=(new Date).toLocaleDateString("id-ID");const filters={normal:"none",sepia:"sepia(100%)",bw:"grayscale(100%)",vintage:"sepia(50%) contrast(1.2) brightness(0.9)",warm:"sepia(20%) saturate(1.2) hue-rotate(10deg)",cool:"sepia(20%) saturate(1.2) hue-rotate(190deg)",saturate:"saturate(1.5) contrast(1.1)"};startBtn.addEventListener("click",async()=>{try{stream=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"}}),video.srcObject=stream,video.style.display="block",startBtn.style.display="none",captureBtn.disabled=!1}catch(e){alert("Tidak dapat mengakses kamera. Pastikan Anda memberikan izin akses kamera."),console.error("Error accessing camera:",e)}}),document.querySelectorAll(".filter-btn").forEach(e=>{e.addEventListener("click",()=>{document.querySelectorAll(".filter-btn").forEach(e=>e.classList.remove("active")),e.classList.add("active"),currentFilter=e.dataset.filter,video.style.filter=filters[currentFilter]})}),frameUpload.addEventListener("change",e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{customFrame=e.target.result,customBackground.src=customFrame,customBackground.style.display="block"},e.readAsDataURL(t)}}),captureBtn.addEventListener("click",()=>{startCountdown()}),resetBtn.addEventListener("click",()=>{capturedPhotos=[],updateStripPreview(),updateUI()}),downloadStripBtn.addEventListener("click",()=>{downloadStripPhoto()});function startCountdown(){captureBtn.disabled=!0;let e=3;countdown.textContent=e,countdown.classList.add("show");const t=setInterval(()=>{--e>0?countdown.textContent=e:(countdown.textContent="CHEESE! üì∏",setTimeout(()=>{capturePhoto(),countdown.classList.remove("show"),captureBtn.disabled=!1},500),clearInterval(t))},1e3)}function capturePhoto(){canvas.width=video.videoWidth,canvas.height=video.videoHeight,ctx.filter=filters[currentFilter],ctx.scale(-1,1),ctx.drawImage(video,-canvas.width,0,canvas.width,canvas.height),ctx.setTransform(1,0,0,1,0,0);const e=canvas.toDataURL("image/jpeg",.8);capturedPhotos.push(e),updateStripPreview(),updateUI()}function updateStripPreview(){const e=document.querySelectorAll(".strip-photo-slot");e.forEach((e,t)=>{capturedPhotos[t]?(e.innerHTML=`<img src="${capturedPhotos[t]}" alt="Foto ${t+1}">`,e.classList.add("filled")):(e.innerHTML=`<span>Foto ${t+1}</span>`,e.classList.remove("filled"))})}function updateUI(){const e=`Foto: ${capturedPhotos.length}/3`;photoCount.textContent=e,capturedPhotos.length<3?(photoNumber.textContent=capturedPhotos.length+1,captureBtn.textContent=`üì∑ Ambil Foto (${capturedPhotos.length+1}/3)`,downloadStripBtn.disabled=!0):(captureBtn.textContent="‚úÖ Strip Lengkap!",captureBtn.disabled=!0,downloadStripBtn.disabled=!1)}function downloadStripPhoto(){const e=document.createElement("canvas"),t=e.getContext("2d");e.width=400,e.height=800,t.fillStyle="#ffffff",t.fillRect(0,0,400,800),customFrame?((()=>{const o=new Image;o.onload=()=>{t.globalAlpha=.1,t.drawImage(o,0,0,400,800),t.globalAlpha=1,n()},o.src=customFrame})()):n();function n(){t.fillStyle="#2c3e50",t.font="bold 24px Arial",t.textAlign="center",t.fillText("PHOTO STRIP",200,35),capturedPhotos.forEach((o,a)=>{const i=new Image;i.onload=()=>{const o=60+a*220,r=(400-320)/2;t.save(),t.beginPath(),t.roundRect(r,o,320,200,10),t.clip(),t.drawImage(i,r,o,320,200),t.restore(),a===capturedPhotos.length-1&&(t.fillStyle="#7f8c8d",t.font="16px Arial",t.fillText((new Date).toLocaleDateString("id-ID"),200,780),setTimeout(()=>{const t=document.createElement("a");t.download=`strip-photo-${++stripCount}-${Date.now()}.png`,t.href=e.toDataURL("image/png"),document.body.appendChild(t),t.click(),document.body.removeChild(t),addToGallery(e.toDataURL("image/png"))},100))},i.src=o})}}function addToGallery(e){const t=document.createElement("div");t.className="strip-item",t.innerHTML=`\n                <img src="${e}" alt="Strip ${stripCount}">\n                <div class="strip-actions">\n                    <button class="download-btn" onclick="downloadFromGallery('${e}', ${stripCount})">\n                        üíæ Download\n                    </button>\n                </div>\n            `,stripGallery.insertBefore(t,stripGallery.firstChild),t.style.opacity="0",t.style.transform="scale(0.8)",setTimeout(()=>{t.style.transition="all 0.3s ease",t.style.opacity="1",t.style.transform="scale(1)"},100)}function downloadFromGallery(e,t){const n=document.createElement("a");n.download=`strip-photo-${t}.png`,n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}CanvasRenderingContext2D.prototype.roundRect||(CanvasRenderingContext2D.prototype.roundRect=function(e,t,n,o,a){return n<2*a&&(a=n/2),o<2*a&&(a=o/2),this.beginPath(),this.moveTo(e+a,t),this.arcTo(e+n,t,e+n,t+o,a),this.arcTo(e+n,t+o,e,t+o,a),this.arcTo(e,t+o,e,t,a),this.arcTo(e,t,e+n,t,a),this.closePath(),this}),window.addEventListener("beforeunload",()=>{stream&&stream.getTracks().forEach(e=>e.stop())});

    </script>
</body>
</html>
